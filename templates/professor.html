{% extends "base.html" %}
{% block content %}

<h3 class="fw-bold mb-3">ğŸ“¢ êµìˆ˜ ë©”ì‹œì§€ ì‘ì„±</h3>

<form method="POST">
  <div class="mb-3">
    <textarea name="message" class="form-control" rows="3" placeholder="í•™ìƒë“¤ì—ê²Œ ì „ë‹¬í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
  </div>
  <button type="submit" class="btn btn-success w-100">ğŸ“¤ ë©”ì‹œì§€ ë“±ë¡</button>
</form>

<hr>

<h4 class="fw-bold mt-4">ğŸ“‹ ë“±ë¡ëœ êµìˆ˜ ë©”ì‹œì§€</h4>

{% if messages and messages|length > 0 %}
  {% for m in messages %}
  <div class="border rounded p-3 mb-3 bg-light shadow-sm">
    <p class="fw-semibold">{{ m.message or '' }}</p>
    <small class="text-muted">ë“±ë¡ì¼: {{ m.date or '' }}</small>

    <div class="mt-2">
      <!-- ğŸ”¹ ê²Œì‹œ ìƒíƒœì— ë”°ë¥¸ ë²„íŠ¼ í‘œì‹œ -->
      {% if m.confirmed|string == 'yes' %}
        <span class="badge bg-success me-2">ğŸ“¢ ê²Œì‹œ ì™„ë£Œ</span>
      {% else %}
        <form action="{{ url_for('confirm_message', index=loop.index0) }}" method="POST" style="display:inline;">
          <button class="btn btn-sm btn-outline-success me-2">âœ… ê²Œì‹œ í™•ì •</button>
        </form>
      {% endif %}

      <!-- ğŸ”¹ ìˆ˜ì • í¼ -->
      <form action="{{ url_for('edit_message', index=loop.index0) }}" method="POST" style="display:inline;">
        <input type="text" name="new_message" value="{{ m.message }}" class="form-control form-control-sm d-inline-block w-auto mb-1">
        <button class="btn btn-sm btn-outline-info">âœï¸ ìˆ˜ì •</button>
      </form>

      <!-- ğŸ”¹ ì‚­ì œ ë²„íŠ¼ -->
      <form action="{{ url_for('delete_message', index=loop.index0) }}" method="POST" style="display:inline;">
        <button class="btn btn-sm btn-outline-danger">ğŸ—‘ï¸ ì‚­ì œ</button>
      </form>
    </div>
  </div>
  {% endfor %}
{% else %}
  <p class="text-muted">ë“±ë¡ëœ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
{% endif %}

{% endblock %}



