{% extends "base.html" %}
{% block content %}

<h3 class="fw-bold mb-3">ğŸ“¢ êµìˆ˜ ë©”ì‹œì§€ ê´€ë¦¬</h3>

<form method="POST" enctype="multipart/form-data">
  <input type="text" name="title" class="form-control mb-2" placeholder="ë©”ì‹œì§€ ì œëª©" required>
  <textarea name="content" class="form-control mb-3" rows="3" placeholder="ê³µì§€ ë‚´ìš© ì…ë ¥" required></textarea>

  <button type="submit" class="btn btn-primary w-100">ğŸ’¾ ì €ì¥</button>
</form>

<hr>

<h4 class="fw-bold mt-4">ğŸ“œ ë“±ë¡ëœ ë©”ì‹œì§€</h4>

{% if messages and messages|length > 0 %}
  {% for msg in messages %}
  <div class="border rounded p-3 mb-3 bg-light shadow-sm">
    <h5 class="fw-bold">{{ msg.title }}</h5>
    <p style="white-space: pre-wrap;">{{ msg.content }}</p>
    <small class="text-muted">{{ msg.date }}</small>

    <div class="mt-2">
      {% if msg.status == 'confirmed' %}
        <span class="badge bg-success me-2">ê²Œì‹œ ì™„ë£Œ</span>
      {% else %}
        <form action="{{ url_for('confirm_message') }}" method="POST" style="display:inline;">
          <button class="btn btn-sm btn-outline-success me-2">âœ… ê²Œì‹œ í™•ì •</button>
        </form>
      {% endif %}

      <form action="{{ url_for('delete_message') }}" method="POST" style="display:inline;">
        <button class="btn btn-sm btn-outline-danger">ğŸ—‘ï¸ ì‚­ì œ</button>
      </form>
    </div>
  </div>
  {% endfor %}
{% else %}
  <p class="text-muted">ë“±ë¡ëœ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
{% endif %}

{% endblock %}

